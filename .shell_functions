# Utility shell functions.
# vi: ft=sh

# Source file if it exists.
sourceifexists() {
	[ -f "$1" ] && [ -r "$1" ] && . "$1"
}
export sourceifexists >/dev/null

cdw() {
	local prog="$1"
	type "$prog" &>/dev/null
	if [ "$?" -ne 0 ]; then
		echo "\"${prog}\" not found in \$PATH." >&2
	else
		dir=$(dirname $(which "$prog"))
		echo "$dir"
		cd "$dir"
	fi
}
export cdw >/dev/null
$completion_func -cf cdw

# Time conversions.
epoch2iso8601() {
    local epoch="$1"
    date -d @$epoch +%Y-%m-%dT%H:%M:%S%z
}
export epoch2iso8601 >/dev/null

iso86012epoch() {
    local iso="$1"
    date -d "$iso" +%s
}
export iso86012epoch >/dev/null
